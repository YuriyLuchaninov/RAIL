<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Cross-Platform Apps</title>

    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Hakim El Hattab">

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/beige.css" id="theme">
    <link rel="stylesheet" href="css/custom.css">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
        var link = document.createElement('link');
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
        document.getElementsByTagName('head')[0].appendChild(link);
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
</head>

<body>
<!--start of presentation-->
<div class="reveal">
    <div class='footer'>
        <div id="response" style="background: #83c141;">Response</div>
        <div id="animation" style="background: #37c7aa;">Animation</div>
        <div id="idle" style="background: #38a6d9;">Idle</div>
        <div id="load" style="background: #6761ed;">Load</div>
    </div>

    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
        <section>
            <h2>Secrets Of Building</h2>
            <h1><span class="warning">High-Performance</span></h1>
            <h2>Web Based Apps</h2>
            <p>
                <small>Yuriy Luchaninov <a href="http://mobidev.biz/">Mobidev.biz</a></small>
            </p>

            <aside class="notes">
                1) Предсталяемся
                2) Говорим о том о чем будет доклад
                3) Говорим о структуре доклада из каких частей будет состоять и сколько займет.
                4) Говорим что вопросы можно будет задать после доклада
            </aside>
        </section>

        <section>
            <h2>Why customers choose Web Apps ?</h2>
            <ul>
                <li class="fragment">it takes less money for development</li>
                <li class="fragment">it takes less money for changing</li>
                <li class="fragment">sometimes it's the only way to implement the necessary functionality</li>
            </ul>
            <h3 class="fragment"><span class="warning">Only three reasons</span></h3>

            <aside class="notes">
                Говорим, что в реальном мире есть всего три причины использовать кроссплатформу и приводим примеры.
            </aside>
        </section>

        <section>
            <h2>THERE'S ALWAYS A "BUT"</h2>
            <p class="fragment">
                JS platforms don't have enough performance!
            </p>
            <h3 class="fragment"><span class="warning"><span style="text-decoration: underline;">BUT</span> IT'S JUST AN OPINION</span>
            </h3>
        </section>

        <section>
            <h2>What is Performance?</h2>
            <div style="position:relative; height:405px; margin:0 auto;">
                <img class="img" height="405" src="assets/img/first.png"/>
                <img class="img fragment" height="405" src="assets/img/first_1.png"/>
                <img class="img fragment" height="405" src="assets/img/first_2.png"/>
                <img class="img fragment" height="405" src="assets/img/first_3.png"/>
            </div>
            <p><span class="attention">"Fast is good, faster is better"</span> - every bit of pref research</p>
        </section>

        <section>
            <h2>In Real Life</h2>
            <div style="position:relative; height:405px; margin:0 auto;">
                <img class="img fragment" height="405" src="assets/img/second.png"/>
                <img class="img fragment" height="405" src="assets/img/second_1.png"/>
                <img class="img fragment" height="405" src="assets/img/second_2.png"/>
            </div>
        </section>

        <section
                data-background-video="https://s3.amazonaws.com/static.slid.es/site/homepage/v1/homepage-video-editor.mp4,https://s3.amazonaws.com/static.slid.es/site/homepage/v1/homepage-video-editor.webm"
                data-background-video-loop>
            <h1><span class="warning">Is 50ms "Too Slow"?</span></h1>
            <aside class="notes">
                Показываем видео рального приложения, и спрашиваем 50 мс это мало или много?
            </aside>
        </section>

        <section>
            <h2>Real Life</h2>
            <table>
                <thead>
                <tr>
                    <th class="invert" style="background: #0073cc;">Delay</th>
                    <th class="invert" style="background: #0073cc;">User reaction</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td class="green">0-100ms</td>
                    <td>Instant</td>
                </tr>
                <tr>
                    <td class="orange">100-300ms</td>
                    <td>Slight perceptible delay</td>
                </tr>
                <tr>
                    <td class="red">300-1,000ms</td>
                    <td>Task focus, perceptible delay</td>
                </tr>
                <tr>
                    <td class="unacceptable">+1,000ms</td>
                    <td>Mental context switch</td>
                </tr>
                <tr>
                    <td class="unacceptable">+10,000ms</td>
                    <td>I'll come back later... maybe</td>
                </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h2>Four phases of interaction</h2>
            <p>
                <img style="background: none; border: none; box-shadow: none;" src="assets/img/four%20steps.png"/>
            </p>
        </section>

        <section>
            <h2>Real Performance Criteria</h2>
            <table>
                <thead>
                <tr>
                    <th class="pink">Response</th>
                    <th class="violet">Animation</th>
                    <th class="grey">Idle</th>
                    <th class="blue">Load</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Tap to paint in <span class="pink">less than 100 ms</span></td>
                    <td>Each frame completes in <span class="violet">less than 16ms</span></td>
                    <td>Use idle time to proactively schedule work</td>
                    <td>Satisfy the <span class="blue">Response</span> goals during load</td>
                </tr>
                <tr>
                    <td></td>
                    <td>Drag to paint in <span class="violet">less than 16ms</span></td>
                    <td>Complete that work in <span class="grey">50ms chunks</span></td>
                    <td>Get first meaningful paint in <span class="blue">1,000ms</span></td>
                </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h1><span class="pink">R</span><span class="violet">A</span><span class="grey">I</span><span
                    class="blue">L</span> puts the <span class="warning">User</span></h1>
            <h1><span class="attention">in the center</span></h1>
        </section>

        <!--response part-->
        <section data-background-color="#83c141">
            <h1><span class="invert">Response</span></h1>
        </section>

        <section>
            <h1><span class="violet" style="text-transform: none;">100ms</span></h1>
            <h3>The User feels an <span class="violet">instantaneous</span> response.</h3>
            <p>Any longer and the connection between action and reaction is broken.</p>
        </section>

        <section>
            <h3>Tip 1: Use "fastclick" library</h3>
            <h1><span class="warning">300MS</span></h1>
        </section>

        <section>
            <h3>Tip 2: Use unblocking interaction patterns</h3>
            <pre style="box-shadow: none;">
                <code class="hljs" data-trim>
onListItemClick() {
    // set timeout
    let spinnerTimeout = setTimeout(showSpiner, 100);

    // start loading the data
    loadDetailsData().then((data) => {
        clearTimeout(spinnerTimeout);
        hideSpinner();

        // start showbiz to transition to details
        transitionToDetailsView(data);
    });
}</code>
            </pre>
        </section>

        <section>
            <h3>Tip 3: Check your "tap" areas</h3>
            <p class="fragment fade-out"
               style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;"
               data-fragment-index="0">
                <img height="338" src="assets/img/taparea.png"
                     style="background: none; border: none; box-shadow: none;"/>
            </p>
            <p class="fragment fade-in"
               style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;"
               data-fragment-index="0">
                <img height="338" src="assets/img/taparea%20real.jpg"
                     style="background: none; border: none; box-shadow: none;"/>
            </p>
        </section>

        <section>
            <h3>Measuring</h3>
            <pre style="box-shadow: none;">
                <code class="hljs" data-trim>
sideNavToggleButton.addEventListener('click', ()=> {
    console.time('sideNavToggleResponse');
    this.toggleSideNav();

    // wait until the frame
    requestAnimationFrame(_ => {
        console.timeEnd('sideNavToggleResponse');
    });
});</code>
            </pre>
        </section>

        <section>
            <h3>Checklist</h3>
            <ul>
                <li>Use "fastclick" library</li>
                <li>Use unblocking interaction patterns</li>
                <li>Check your "tap" areas</li>
            </ul>
        </section>

        <!--animation part-->
        <section data-background-color="#37c7aa">
            <h1><span class="invert">Animation</span></h1>
        </section>

        <section>
            <h1><span class="pink" style="text-transform: none;">16ms</span></h1>
            <h3>Visual changes feel <span class="pink">smooth and consistent</span>.</h3>
            <p>Any variation in frame rate will be disconcerting to the user.</p>
        </section>

        <section>
            <h3><span class="warning">But:</span> in real life</h3>
            <p>
                <img height="338" src="assets/img/animation.png"
                     style="background: none; border: none; box-shadow: none;"/>
            </p>
        </section>

        <section>
            <h3>Tip 1: Use <span class="pink">FLIP</span></h3>
            <ul>
                <li><span class="pink">F</span>irst: the initial state of the element(s) involved in the
                    transition.
                </li>
                <li><span class="pink">L</span>ast: the final state of the element(s)</li>
                <li><span class="pink">I</span>nvert: here’s the fun bit. You figure out from the first and last
                    how the element has changed, so – say – its width, height, opacity. Next you apply transforms and
                    opacity changes to reverse, or invert, them.
                </li>
                <li><span class="pink">P</span>lay: switch on transitions for any of the properties you changed,
                    and then remove the inversion changes.
                </li>
            </ul>
        </section>

        <section>
            <h3>Tip 2: Use CSS animation</h3>
            <ul class="fragment fade-out"
                style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;"
                data-fragment-index="0">
                <li>transform: translateZ(0);</li>
                <li>transform: translate3d(0,0,0);</li>
            </ul>
            <ul class="fragment fade-in warning"
                style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;"
                data-fragment-index="0">
                <li>In CPU we operate objects, in GPU - textures</li>
                <li>Transition CPU - always separate repaint</li>
                <li>Transition CPU - GPU takes time</li>
                <li>Memory consumption grows</li>
                <li>One can accidentally transfer unnecessary elements to GPU</li>
                <li>*{transform: translateZ(0);} - BAD!</li>
            </ul>
        </section>

        <section>
            <h3>Measuring</h3>
            <p>

            </p>
        </section>

        <section>
            <h3>Checklist</h3>
            <ul>
                <li>Use FLIP approach</li>
                <li>Use CSS animations</li>
            </ul>
        </section>

        <!--idle part-->
        <section data-background-color="#38a6d9">
            <h1><span class="invert">Idle</span></h1>
        </section>

        <section>
            <h1><span style="color: #38a6d9; text-transform: none;">50ms</span></h1>
            <h3>Allows for <span style="color: #38a6d9">responding</span> to user interaction.</h3>
            <p>Any longer and we may not be responsive.</p>
        </section>

        <section>
            <h3>Tip 1: Divide your operations into 50ms chunks</h3>
            <pre class="fragment fade-in"
                 style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; box-shadow: none;"
                 data-fragment-index="0">
                <code class="hljs" data-trim>
window.requestIdleCallback =
    window.requestIdleCallback ||
    function (cb) {
        var start = Date.now();
        return setTimeout(function () {
            cb({
                didTimeout: false,
                timeRemaining: function () {
                    return Math.max(0, 50 - (Date.now() - start));
                }
            });
        }, 1);
    };</code>
            </pre>
            <pre class="fragment fade-out"
                 style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; box-shadow: none;"
                 data-fragment-index="0">
                <code class="hljs" data-trim>
function handleTasks(deadline) {
    while (deadline.timeRemaining() > MIN_TASK_TIME && tasks.length) {
        processTask(tasks.pop());
    }

    if (tasks.length) {
        requestIdleCallback(handleTasks);
    }
}

requestIdleCallback(handleTasks);</code>
            </pre>
        </section>

        <section>
            <h3>Tip 2: Use Web Workers for background operations</h3>
<pre class="fragment fade-out"
     style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; box-shadow: none;"
     data-fragment-index="0">
                <code class="hljs" data-trim>
// Watch for messages from the worker
worker.onmessage = function (e) {
    // The message from the client:
    console.log(e.data);
};

worker.postMessage('start');</code>
            </pre>
            <pre class="fragment fade-in"
                 style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; box-shadow: none;"
                 data-fragment-index="0">
                <code class="hljs" data-trim>
onmessage = function(e){
    if ( e.data === 'start' ) {
        // Do some computation
        done()
    }
};

function done(){
    // Send back the results to the parent page
    postMessage('done');
}</code>
            </pre>
        </section>

        <section>
            <h3>Measuring</h3>
            <p>

            </p>
        </section>

        <section>
            <h3>Checklist</h3>
            <ul>
                <li>Divide your operations into 50ms chunks</li>
                <li>Use Web Workers for background operations</li>
            </ul>
        </section>

        <!--load part-->
        <section data-background-color="#6761ed">
            <h1><span class="invert">Load</span></h1>
        </section>

        <section>
            <h1><span class="blue" style="text-transform: none;">1sec</span></h1>
            <h3>The User's flow of <span class="blue">thought</span> is <span class="blue">seamless</span>.</h3>
            <p>Beyond it, the user loses focus and attention.</p>
        </section>

        <section>
            <h3>Tip 1: Prepare your data mockups</h3>
            <pre style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0; box-shadow: none;"
                 data-fragment-index="0">
                <code class="hljs" data-trim>
&lt;script&gt;
    window.dataMockups = {
        "_id": "570ce1ffa7a72b00d7b1c916",
        "balance": "$1,510.99",
        "picture": "http://placehold.it/32x32",
        "age": 22,
        "eyeColor": "brown",
        "name": "Page Workman",
        "gender": "male",
        "email": "pageworkman@matrixity.com",
        "phone": "+1 (831) 424-2078",
        "address": "481 Bradford Street, Newcastle, Maryland, 855",
            ...
    };
&lt;/script&gt;
                </code>
            </pre>
        </section>

        <section>
            <h3>Tip 2: Use service workers</h3>
            <p>
                <img height="500" src="assets/img/offline-first-diagram.png"
                     style="background: none; border: none; box-shadow: none;"/>
            </p>
        </section>

        <section>
            <h3>Measuring</h3>
            <p>

            </p>
        </section>

        <section>
            <h3>Checklist</h3>
            <ul>
                <li>Prepare your data mockups</li>
                <li>Use service workers</li>
            </ul>
        </section>

        <!--common part-->
        <section data-background="assets/img/stripe.jpg" data-state="img-center">
            <h1><span class="invert">Common tips</span></h1>
        </section>

        <section>
            <h3>Tip 1: Try to understand composing & rendering of layers</h3>
            <p>
                <img height="338" src="assets/img/layers.png"
                     style="background: none; border: none; box-shadow: none;"/>
            </p>
        </section>

        <section>
            <h3>Tip 2: DOM structure is important</h3>
            <ul>
                <li>3 elements = 0.003ms</li>
                <li>1000 elements = 0.03ms</li>
                <li>10000 elements = 0.36ms</li>
                <li>+JQuery = 2,46ms</li>
            </ul>
        </section>

        <section class="replace">
            <h3>Tip 3: Choose modern frameworks</h3>
            <div style="position:relative; height:405px; margin:0 auto;">
                <img class="img fragment" data-fragment-index="1" height="405" src="assets/img/mf_FPS.svg"
                     style="background: none; border: none; box-shadow: none;"/>
                <img class="img fragment" data-fragment-index="2" height="405" src="assets/img/mf_layout.svg"
                     style="background: none; border: none; box-shadow: none;"/>
                <img class="img fragment" data-fragment-index="3" height="405" src="assets/img/mf_paint.svg"
                     style="background: none; border: none; box-shadow: none;"/>
                <img class="img fragment" data-fragment-index="4" height="405" src="assets/img/js_totalheap.svg"
                     style="background: none; border: none; box-shadow: none;"/>
            </div>
        </section>

        <section>
            <h3>Tip 4: Use flat or material CSS styles</h3>
            <p class="fragment fade-out"
               style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;"
               data-fragment-index="0">
                <img height="500" src="assets/img/unflat.jpg"
                     style="background: none; border: none; box-shadow: none;"/>
            </p>
            <p class="fragment fade-in"
               style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;"
               data-fragment-index="0">
                <img height="500" src="assets/img/flat.jpg" style="background: none; border: none; box-shadow: none;"/>
            </p>
        </section>

        <section>
            <h3>Tip 5: You must prepare images</h3>
            <p>
                <img height="500" src="assets/img/images.png"
                     style="background: none; border: none; box-shadow: none;"/>
            </p>
        </section>

        <section>
            <h3>Tip 6: Use correct UI patterns</h3>
            <p class="fragment fade-out"
               style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;"
               data-fragment-index="0">
                <img height="500" src="assets/img/list.gif" style="background: none; border: none; box-shadow: none;"/>
            </p>
            <p class="fragment fade-in"
               style="position:absolute; margin-left: auto; margin-right: auto; left: 0; right: 0;"
               data-fragment-index="0">
                <img height="500" src="assets/img/slideUI.png"
                     style="background: none; border: none; box-shadow: none;"/>
            </p>
        </section>

        <section>
            <h3>Checklist</h3>
            <ul>
                <li>Try to understand composing & rendering of layers</li>
                <li>DOM structure is important</li>
                <li>Choose modern frameworks</li>
                <li>Use flat or material CSS styles</li>
                <li>You must prepare images</li>
                <li>Use correct UI patterns</li>
            </ul>
        </section>

        <!--conclusion part-->
        <section class="replace">
            <h2>Conclusion</h2>
            <h2 class="fragment"><span class="warning">Real performance for end user isn't the same as the performance for developer!</span></h2>
        </section>

        <section>
            <h1><span class="warning">Questions ?</span></h1>
        </section>

    </div>

</div>

<!--end of presentation-->
<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
            {
                src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            }
            },
            {
                src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            }
            },
            {
                src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            }
            },
            {src: 'plugin/zoom-js/zoom.js', async: true},
            {src: 'plugin/notes/notes.js', async: true}
        ]
    });

</script>

<script>
    (function () {
        var map = {
            response: [9, 11, 12, 13, 14, 15, 16, 37, 38, 40, 41, 42, 43, 39],
            animation: [9, 18, 19, 20, 21, 22, 23, 37, 38, 40, 41, 42, 43, 39],
            idle: [9, 25, 26, 27, 28, 29, 37, 38, 40, 41, 42, 43, 39],
            load: [9, 31, 32, 33, 34, 35, 37, 38, 40, 41, 42, 43, 39]
        };

        var response = document.querySelector('#response');
        var animation = document.querySelector('#animation');
        var idle = document.querySelector('#idle');
        var load = document.querySelector('#load');

        // displayed upon load, hides when slide changes
        Reveal.addEventListener('slidechanged', function (event) {
            if (map.response.indexOf(event.indexh) !== -1) {
                response.style.display = 'inline-block';
            } else {
                response.style.display = 'none';
            }

            if (map.animation.indexOf(event.indexh) !== -1) {
                animation.style.display = 'inline-block';
            } else {
                animation.style.display = 'none';
            }

            if (map.idle.indexOf(event.indexh) !== -1) {
                idle.style.display = 'inline-block';
            } else {
                idle.style.display = 'none';
            }

            if (map.load.indexOf(event.indexh) !== -1) {
                load.style.display = 'inline-block';
            } else {
                load.style.display = 'none';
            }
        });
    })();
</script>

</body>
</html>
